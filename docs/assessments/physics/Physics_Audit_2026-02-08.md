# Physics Audit Report - 2026-02-08

**Date:** 2026-02-08
**Auditor:** Jules (AI Physics Auditor)
**Focus Area:** Core Physics Engine (Ball Flight, Impact, Biomechanics, Equipment)

## Executive Summary

The physics engine demonstrates a solid foundation in basic mechanics but relies on significant simplifications that limit high-fidelity simulation, particularly in ball-club interaction and aerodynamic spin decay. The kinematic sequence analysis adheres to a specific order that presents patent risks.

*   **Overall Physics Fidelity Score:** 6/10
*   **Critical Issues Count:** 5
*   **Confidence in Results:** High (Code analysis confirms mathematical models)

## Findings by Category

### 1. Mathematical Correctness

*   **Issue:** Ground Reaction Force (GRF) Implementation is Placeholder
    *   **File:** `src/shared/python/ground_reaction_forces.py`
    *   **Description:** The `extract_grf_from_contacts` function assumes static equilibrium and sums gravity forces instead of querying actual contact forces.
    *   **Expected Physics:** GRF should be derived from the dynamic contact constraint forces (normal + friction) calculated by the physics engine.
    *   **Actual Implementation:** Placeholder logic: `total_force[2] += abs(np.sum(g))` if gravity exists.
    *   **Impact:** Invalidates any biomechanical analysis relying on GRF (power, efficiency) for dynamic movements.
    *   **Recommended Fix:** Query the physics engine's contact solver for actual reaction forces.

*   **Issue:** Missing Spin Decay in Ball Flight
    *   **File:** `src/shared/python/ball_flight_physics.py`
    *   **Description:** The `_flight_dynamics_step` function calculates drag and Magnus forces based on current spin but does not update the spin rate over time. Real golf balls experience spin decay due to air friction.
    *   **Expected Physics:** Spin should decay exponentially: $\omega(t) = \omega_0 e^{-k t}$.
    *   **Actual Implementation:** Constant spin throughout flight.
    *   **Impact:** Overestimates lift and side forces late in flight, leading to incorrect trajectory shape and landing position (ball "hangs" too long).
    *   **Recommended Fix:** Implement `compute_spin_decay` from `aerodynamics.py` within the integration loop.

### 2. Physical Plausibility

*   **Issue:** Clubhead Modeled as Point Mass
    *   **File:** `src/shared/python/impact_model.py` (Line ~200, `RigidBodyImpactModel`)
    *   **Description:** The collision model treats the clubhead as a point mass, calculating effective mass as $m_{eff} = \frac{m_{ball} m_{club}}{m_{ball} + m_{club}}$.
    *   **Expected Physics:** Real clubheads are rigid bodies with Moment of Inertia (MOI). Off-center impacts cause rotation, reducing the effective mass and energy transfer (Smash Factor < 1.50 even with perfect COR).
    *   **Actual Implementation:** Point mass assumption implies infinite MOI (no rotation upon impact), leading to overestimated ball speeds on off-center hits.
    *   **Impact:** Critical inaccuracy for equipment fitting and forgiveness modeling.
    *   **Recommended Fix:** Implement 3D rigid body impulse-momentum equations including the Inertia Tensor ($I$) of the clubhead.

### 3. Equipment Models

*   **Issue:** Heuristic Gear Effect Model
    *   **File:** `src/shared/python/impact_model.py` (Line ~411, `compute_gear_effect_spin`)
    *   **Description:** Gear effect spin is calculated using a linear heuristic: `spin = gear_factor * offset * speed * scale`.
    *   **Expected Physics:** Gear effect arises from the torque generated by the offset impact force relative to the Center of Gravity (CG), causing the clubface to rotate and the ball to roll across the face (gearing). It depends on MOI, CG location, and friction.
    *   **Actual Implementation:** Empirical scaling factors (`h_scale=100.0`, `v_scale=50.0`) without physical basis.
    *   **Impact:** Cannot model specific clubhead designs (e.g., Draw/Fade bias weights, MOI improvements).
    *   **Recommended Fix:** Derive gear effect spin from the full rigid body collision model (using tangential impulse and relative surface velocity).

### 4. Biomechanics Accuracy

*   **Issue:** Patent Risk in Kinematic Sequence Order
    *   **File:** `src/shared/python/kinematic_sequence.py`
    *   **Description:** The analyzer hardcodes and checks for `expected_order = ['Pelvis', 'Torso', 'Arm', 'Club']`.
    *   **Risk:** This specific sequence definition is closely associated with TPI (Titleist Performance Institute) and potentially covered by patents or trademarks regarding "Kinematic Sequence" methodology.
    *   **Impact:** Legal risk.
    *   **Recommended Fix:** Refactor to a generalized "Segment Timing" approach that detects peaks without enforcing a specific "correct" order by default, or allows user-defined configuration completely.

## Validation Recommendations

1.  **Spin Decay Validation:** Compare simulated trajectories against TrackMan optimizer data for driver (high spin decay) vs. irons.
2.  **Impact Physics:** Validate "Smash Factor" vs. impact offset. The current model likely shows constant 1.50 (for COR=0.83) regardless of offset, whereas real data shows a parabolic drop-off.
3.  **Aerodynamics:** Verify the polynomial coefficients (`cd0`, `cd1`, etc.) in `BallProperties` against modern pro-v1 wind tunnel data if available. The current source (Bearman & Harvey 1976) is outdated.

## Citations Needed

*   **Aerodynamic Coefficients:** `src/shared/python/ball_flight_physics.py` uses hardcoded coefficients without specific attribution in the class definition (though `physics_constants.py` cites Bearman & Harvey).
*   **Gear Effect Constants:** `gear_effect_h_scale=100.0` in `impact_model.py` needs a source or derivation.
