# Issue: Comprehensive DRY and Orthogonality Overhaul (Jan 2026)

**Priority:** ðŸ”´ High
**Category:** Maintenance / Technical Debt
**Status:** In Progress

## Description

The repository was identified to have significant "God Function" clusters and pervasive logic duplication across script entry points and test setups. This issue tracks the systematic refactoring of these components to adhere to Pragmatic Programmer principles.

## Progress Checklist

### 1. Script & CLI Consolidation (DRY)

- [x] Create `src/shared/python/launcher_utils.py` and `scripts/script_utils.py` for standard lifecycle management.
- [x] Refactor major entry points (`launch_golf_suite.py`, `start_api_server.py`, etc.) to use centralized `run_main` / `invoke_main`.
- [x] Consolidate `get_repo_root` and `setup_logging` boilerplate.

### 2. Image & Icon Processing (DRY)

- [x] Create `src/shared/python/image_utils.py` to host complex Pillow-based enhancement and auto-cropping logic.
- [x] Refactor `scripts/create_favicon.py`, `create_high_quality_favicon.py`, `create_cropped_robot_icon.py`, `create_windows_optimized_icon.py`, and `diagnose_icon_quality.py`.
- [x] Eliminate ~800 lines of duplicate image processing logic.

### 3. Test Suite Refactoring (Orthogonality / DRY)

- [x] Create `tests/conftest.py` with shared fixtures for URDF generation and engine dynamics configuration.
- [x] Refactor `tests/acceptance/test_drift_control_decomposition.py` from engine-specific classes to parameterized tests.
- [x] Refactor `tests/analytical/test_pendulum_lagrangian.py` to use shared factories and parameterized inverse dynamics tests.
- [ ] Address identified "God functions" in remaining test modules (e.g., `tests/integration/test_cross_engine_consistency.py`).

### 4. GUI Launcher Decomposition (Orthogonality)

- [x] Extract Docker environment management into `src/launchers/docker_manager.py`.
- [x] Extract modular UI components (e.g., `DraggableModelCard`) into `src/launchers/ui_components.py`.
- [ ] Further decompose the main `GolfLauncher` class (current size: ~2000 lines).

## Impact Metrics (as of Jan 24)

- **Major Issues (Pragmatic Review):** Reduced from ~19,000 (false positives included) to **~650** (legitimate refactoring targets).
- **Code Volume:** Reduced redundant script logic by approximately 1,200 lines.
- **Maintainability:** Standardized error handling and logging across the entire codebase.

---

_Generated by Antigravity AI - Jan 24, 2026_
