---
title: Critical Error in GRF Fallback Calculation Ignoring Dynamics
labels: physics-error, critical
assignees: physics-team
---

## Description
The `extract_grf_from_contacts` function in `src/shared/python/physics/ground_reaction_forces.py` (Line 385) implements an incorrect fallback mechanism when engine contact data is unavailable:

```python
# FIXME: This fallback calculation is inaccurate for dynamic movements.
# It only accounts for static weight (W=mg) and ignores dynamic acceleration forces (F=m(g+a)).
total_force[2] += abs(np.sum(g))
```

This simply sums the static weight of the bodies, completely ignoring the dynamic forces generated by the golfer's acceleration (e.g., pushing off the ground).

## Expected Behavior
The system should implement an **Inverse Dynamics** solver to estimate the required Ground Reaction Force (GRF) based on the center of mass (COM) acceleration:
$F_{GRF} = m(g + a_{com})$

## Impact
- **Severe Underestimation**: Dynamic vertical GRF in a golf swing can exceed 200% of body weight. This fallback caps it at 100% (static weight).
- **Invalid Biomechanics**: Power transfer calculations ($P = F \cdot v$) will be grossly incorrect.
- **COP Error**: The fallback assumes a static COP or places it incorrectly.

## Recommended Fix
1. Calculate the full system Center of Mass (COM) acceleration vector $a_{com}$ from the physics engine state.
2. Replace the static weight sum with the dynamic force equation: $F_{GRF} = M_{total} (g + a_{com})$.
