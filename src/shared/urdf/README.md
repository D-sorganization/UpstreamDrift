# Model Library for Golf Modeling Suite

This directory contains pre-configured URDF models and assets for golf swing simulation.

## Features

### Human Biomechanical Models

The model library provides integration with the [human-gazebo repository](https://github.com/gbionics/human-gazebo), which contains high-fidelity URDF models of humans created for human-robot interaction experiments.

Available models:
- **Human Subject with Meshes**: Full human body model with detailed STL meshes (CC-BY-SA 2.0 license)
- **Human Subject with Spinal Cord**: Enhanced model with detailed spinal representation

These models can be used across all physics engines (MuJoCo, Drake, Pinocchio) for realistic golf swing simulation.

### Golf Clubs

Procedurally generated golf club URDFs with realistic specifications:

- **Driver**: 45" length, 10.5° loft, 310g total mass
- **5-Iron**: 38" length, 28° loft, 390g total mass
- **7-Iron**: 36.5" length, 34° loft, 410g total mass 
- **9-Iron**: 35" length, 42° loft, 430g total mass
- **Sand Wedge**: 35" length, 56° loft, 460g total mass
- **Putter**: 34" length, 3° loft, 370g total mass

Each club includes:
- Accurate mass distribution (head, shaft, grip)
- Realistic geometry (cylinders for shaft/grip, box approximation for head)
- Proper inertial properties
- Configurable loft angle

### MyoConverter Integration  

The library includes integration with [MyoConverter](https://github.com/MyoHub/myoconverter), a tool for converting OpenSim musculoskeletal models to MuJoCo format with optimized muscle kinematics and kinetics.

Features:
- Convert OpenSim (.osim) models to MuJoCo (.xml) format
- Automatic muscle optimization
- Validation PDF report generation
- Compatible with MyoSuite for neural control

## Usage

### In URDF Generator GUI

1. Launch the URDF Generator: `python tools/urdf_generator/launch_urdf_generator.py`
2. Select **File > Load from Library** (Ctrl+L)
3. Choose a human model or golf club
4. The model will be loaded into the editor

### Programmatic Usage

```python
from tools.urdf_generator.model_library import ModelLibrary

# Initialize library
library = ModelLibrary()

# Download a human model
urdf_path = library.download_human_model("human_with_meshes")

# Generate a golf club URDF
club_path = library.generate_golf_club_urdf("driver")

# List available models
models = library.list_available_models()
print(f"Human models: {models['human']}")
print(f"Golf clubs: {models['golf_clubs']}")
```

### MyoConverter Usage

```python
from shared.python.myoconverter_integration import MyoConverter

# Initialize converter
converter = MyoConverter()

# Convert OpenSim model to MuJoCo
mujoco_xml = converter.convert_osim_to_mujoco(
    osim_file=Path("model.osim"),
    geometry_folder=Path("Geometry"),
    output_folder=Path("output_mjc"),
    generate_pdf=True  # Generate validation report
)

# Get code to load converted model with keyframe
load_code = converter.load_converted_model_keyframe(mujoco_xml)
print(load_code)
```

## Directory Structure

```
shared/
├── urdf/
│   ├── human_models/        # Downloaded human URDF models
│   │   └── human_with_meshes/
│   │       ├── model.urdf
│   │       └── metadata.json
│   ├── golf_clubs/          # Generated golf club URDFs
│   │   ├── driver/
│   │   ├── iron_5/
│   │   └── ...
│   └── simple_humanoid.urdf
└── meshes/
    ├── human/               # Human body meshes (STL files)
    └── golf_clubs/          # Golf club meshes
```

## Dependencies

### For Human Models

- Internet connection to download from human-gazebo repository
- Models use STL mesh files for visualization

### For MyoConverter

MyoConverter requires specific dependencies:

**Linux (Recommended):**
```bash
conda create -n myoconv python=3.9
conda activate myoconv
conda install -c conda-forge myoconverter
```

**Windows/MacOS (Docker):**
Follow instructions at: https://github.com/MyoHub/myoconverter/blob/main/docker/README.md

## Licenses

- **Human Models**: CC-BY-SA 2.0 (from human-gazebo repository)
- **Golf Clubs**: MIT License (generated by Golf Modeling Suite)
- **MyoConverter Integration**: Apache 2.0

## Citation

If you use the human-gazebo models in your research, please cite:

```bibtex
@misc{human-gazebo,
  author = {Gorbani, Davide and Sartore, Carlotta},
  title = {human-gazebo: URDF models of humans for human-robot interaction},
  year = {2024},
  publisher = {GitHub},
  url = {https://github.com/gbionics/human-gazebo}
}
```

If you use MyoConverter, please cite:

```bibtex
@inproceedings{wang2022myosim,
  title={MyoSim: Fast and physiologically realistic MuJoCo models for musculoskeletal and exoskeletal studies},
  author={Wang, Huawei and Caggiano, Vittorio and Durandau, Guillaume and Sartori, Massimo and Kumar, Vikash},
  booktitle={2022 International Conference on Robotics and Automation (ICRA)},
  pages={8104--8111},
  year={2022},
  organization={IEEE}
}
```

## References

- human-gazebo repository: https://github.com/gbionics/human-gazebo
- human-model-generator: https://github.com/ami-iit/human-model-generator  
- MyoConverter: https://github.com/MyoHub/myoconverter
- MyoConverter Documentation: https://myoconverter.readthedocs.io/
- MyoSuite: https://github.com/facebookresearch/myosuite
