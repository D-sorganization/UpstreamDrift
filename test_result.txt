============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
PyQt6 6.9.1 -- Qt runtime 6.9.1 -- Qt compiled 6.9.0
rootdir: C:\Users\diete\Repositories\Golf_Modeling_Suite
configfile: pyproject.toml
plugins: anyio-4.9.0, benchmark-4.0.0, cov-7.0.0, qt-4.5.0
collected 10 items

tests\integration\test_physics_engines_strict.py ...F......
ERROR: Coverage failure: total of 7 is less than fail-under=17
                                                                         [100%]

================================== FAILURES ===================================
____________________ TestDrakeStrict.test_reset_protection ____________________

self = <tests.integration.test_physics_engines_strict.TestDrakeStrict object at 0x000001D961DEDBD0>

    def test_reset_protection(self):
        """Drake reset should warn if uninitialized."""
        engine = DrakePhysicsEngine()
        engine.context = None  # Force uninitialized
    
        with patch(
            "engines.physics_engines.drake.python.drake_physics_engine.LOGGER"
        ) as mock_log:
            engine.reset()
>           mock_log.warning.assert_called_with(
                "Attempted to reset Drake engine before initialization."
            )

tests\integration\test_physics_engines_strict.py:166: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <MagicMock name='LOGGER.warning' id='2033109695664'>
args = ('Attempted to reset Drake engine before initialization.',), kwargs = {}
expected = "warning('Attempted to reset Drake engine before initialization.')"
actual = 'not called.'
error_message = "expected call not found.\nExpected: warning('Attempted to reset Drake engine before initialization.')\n  Actual: not called."

    def assert_called_with(self, /, *args, **kwargs):
        """assert that the last call was made with the specified arguments.
    
        Raises an AssertionError if the args and keyword args passed in are
        different to the last call to the mock."""
        if self.call_args is None:
            expected = self._format_mock_call_signature(args, kwargs)
            actual = 'not called.'
            error_message = ('expected call not found.\nExpected: %s\n  Actual: %s'
                    % (expected, actual))
>           raise AssertionError(error_message)
E           AssertionError: expected call not found.
E           Expected: warning('Attempted to reset Drake engine before initialization.')
E             Actual: not called.

..\..\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:970: AssertionError
------------------------------ Captured log call ------------------------------
WARNING  engines.physics_engines.drake.python.drake_physics_engine:drake_physics_engine.py:137 Attempted to reset Drake engine before initialization.
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.13.5-final-0 _______________

Name                                                  Stmts   Miss  Cover   Missing
-----------------------------------------------------------------------------------
launchers\__init__.py                                     0      0   100%
launchers\golf_launcher.py                             1165   1165     0%   10-2344
launchers\golf_suite_launcher.py                        130    130     0%   10-218
launchers\unified_launcher.py                            77     77     0%   7-164
shared\python\__init__.py                                33     11    67%   48-53, 60-64
shared\python\biomechanics_data.py                       28      0   100%
shared\python\common_utils.py                            91     79    13%   30-32, 45-52, 67-78, 91-100, 115-124, 142-167, 181-202, 214-236
shared\python\comparative_analysis.py                   107    107     0%   7-255
shared\python\comparative_plotting.py                   100    100     0%   6-342
shared\python\configuration_manager.py                   56     56     0%   6-112
shared\python\constants.py                               61      0   100%
shared\python\core.py                                    13      0   100%
shared\python\engine_manager.py                         254    211    17%   50-112, 129, 137, 152-168, 172-178, 189-207, 213-253, 259-306, 310-349, 353-375, 379-401, 408-428, 432-436, 440-454, 458, 462, 466, 476-495, 503-505, 509-511, 519-552
shared\python\engine_probes.py                          265    265     0%   7-657
shared\python\equipment.py                                7      4    43%   71-76
shared\python\exceptions.py                              10      0   100%
shared\python\interfaces.py                               4      0   100%
shared\python\kinematic_sequence.py                      77     77     0%   8-192
shared\python\model_registry.py                          49     49     0%   3-113
shared\python\optimization\__init__.py                    0      0   100%
shared\python\optimization\examples\__init__.py           0      0   100%
shared\python\optimization\examples\optimize_arm.py      87     87     0%   1-169
shared\python\output_manager.py                         219    219     0%   8-495
shared\python\physics_parameters.py                     120     60    50%   52-72, 76, 314-323, 334, 344, 352, 360-361, 372-384, 392-431
shared\python\plotting.py                               960    910     5%   46-61, 122-126, 140-142, 151-167, 180-206, 223-277, 296-342, 360-459, 467-542, 555-581, 594-621, 629-652, 660-699, 707-743, 751-798, 807-866, 874-909, 924-974, 989-1042, 1051-1168, 1190-1271, 1288-1348, 1365-1430, 1439-1485, 1498-1547, 1555-1642, 1650-1688, 1696-1728, 1737-1771, 1786-1821, 1829-1878, 1893-1948, 1961-1993, 2010-2146, 2159-2220, 2224-2281
shared\python\pose_estimation\__init__.py                 3      3     0%   7-10
shared\python\pose_estimation\interface.py               11     11     0%   3-20
shared\python\pose_estimation\openpose_estimator.py      83     83     0%   7-183
shared\python\pose_estimation\openpose_gui.py            67     67     0%   6-124
shared\python\process_worker.py                          68     68     0%   7-121
shared\python\secure_subprocess.py                      100    100     0%   7-253
shared\python\signal_processing.py                       32     32     0%   8-131
shared\python\statistical_analysis.py                   508    508     0%   11-1393
shared\python\swing_plane_analysis.py                    40     25    38%   43-60, 78-79, 90-109
-----------------------------------------------------------------------------------
TOTAL                                                  4825   4504     7%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml
FAIL Required test coverage of 17% not reached. Total coverage: 6.65%
=========================== short test summary info ===========================
FAILED tests/integration/test_physics_engines_strict.py::TestDrakeStrict::test_reset_protection
======================== 1 failed, 9 passed in 10.76s =========================
